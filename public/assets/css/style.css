/* --------- Vari√°veis de tema --------- */
:root{
    --bg-body:#f3f4f6;
    --bg-sidebar:#ffffff;
    --bg-card:#ffffff;
    --bg-card-muted:#f9fafb;
    --shadow-soft:0 12px 30px rgba(15,23,42,.06);
    --text-main:#111827;
    --text-sub:#6b7280;
    --text-muted:#9ca3af;
    --border-soft:#e5e7eb;
    --accent:#1d4ed8;
    --accent-soft:#eff6ff;
    --avatar-bg:#1d4ed8;

    --badge-success-bg:#dcfce7;
    --badge-success-text:#15803d;
    --badge-danger-bg:#fee2e2;
    --badge-danger-text:#b91c1c;
    --badge-muted-bg:#e5e7eb;
    --badge-muted-text:#4b5563;
}

/* Tema escuro */
html[data-theme="dark"]{
    --bg-body:#020617;
    --bg-sidebar:#020617;
    --bg-card:#020617;
    --bg-card-muted:#020617;
    --shadow-soft:0 20px 40px rgba(0,0,0,.75);
    --text-main:#e5e7eb;
    --text-sub:#9ca3af;
    --text-muted:#6b7280;
    --border-soft:#1f2937;
    --accent:#3b82f6;
    --accent-soft:rgba(37,99,235,.18);
    --avatar-bg:#1d4ed8;

    --badge-success-bg:rgba(22,163,74,.15);
    --badge-success-text:#4ade80;
    --badge-danger-bg:rgba(248,113,113,.15);
    --badge-danger-text:#fecaca;
    --badge-muted-bg:#111827;
    --badge-muted-text:#9ca3af;
}

/* --------- Layout base --------- */
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",system-ui,sans-serif}
body{
    background:var(--bg-body);
    color:var(--text-main);
}
.layout{display:flex;min-height:100vh}

/* Sidebar */
.sidebar{
    width:260px;
    background:var(--bg-sidebar);
    padding:24px 20px;
    box-shadow:8px 0 30px rgba(15,23,42,.15);
    display:flex;
    flex-direction:column;
}
html[data-theme="dark"] .sidebar{
    box-shadow:8px 0 40px rgba(0,0,0,.85);
}
.sidebar-header{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:26px;
}
.app-name{
    font-weight:700;
    color:var(--text-main);
    font-size:18px;
}
.sidebar-nav{flex:1}
.nav-section{
    font-size:11px;
    text-transform:uppercase;
    color:var(--text-muted);
    margin:16px 0 6px;
}
.nav-item{
    display:block;
    padding:8px 10px;
    border-radius:10px;
    color:var(--text-sub);
    text-decoration:none;
    font-size:14px;
    margin-bottom:4px;
}
.nav-item.active,
.nav-item:hover{
    background:var(--accent-soft);
    color:var(--accent);
}
.sidebar-upgrade{
    background:linear-gradient(135deg,#1d4ed8,#2563eb);
    color:white;
    border-radius:18px;
    padding:16px 14px;
    font-size:13px;
}
.sidebar-upgrade h4{margin-bottom:6px;font-size:15px}
.btn-primary.full{
    width:100%;
    background:white;
    color:#1d4ed8;
    border:none;
    padding:9px 0;
    border-radius:999px;
    font-weight:600;
    margin-top:10px;
    cursor:pointer;
}
html[data-theme="dark"] .btn-primary.full{
    background:#e5e7eb;
}

/* Main */
.main{
    flex:1;
    padding:24px 28px;
}
.topbar{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    margin-bottom:22px;
}
.topbar h1{
    font-size:24px;
    margin-bottom:4px;
}
.topbar p{
    font-size:13px;
    color:var(--text-sub);
}
.search{
    padding:8px 12px;
    border-radius:999px;
    border:1px solid var(--border-soft);
    font-size:14px;
    width:220px;
    margin-right:16px;
    background:transparent;
    color:var(--text-main);
}
.search::placeholder{
    color:var(--text-muted);
}
.topbar-right{
    display:flex;
    align-items:center;
    gap:10px;
}

/* Theme toggle button */
.theme-toggle{
    width:36px;
    height:36px;
    border-radius:999px;
    border:1px solid var(--border-soft);
    display:flex;
    align-items:center;
    justify-content:center;
    background:var(--bg-card);
    cursor:pointer;
    margin-right:8px;
    position:relative;
    font-size:16px;
}
.theme-icon{
    position:absolute;
    opacity:0;
    transition:opacity .18s ease;
}
.theme-icon-sun{color:#fbbf24;}
.theme-icon-moon{color:#e5e7eb;}
html[data-theme="light"] .theme-icon-sun{opacity:1;}
html[data-theme="light"] .theme-icon-moon{opacity:0;}
html[data-theme="dark"] .theme-icon-sun{opacity:0;}
html[data-theme="dark"] .theme-icon-moon{opacity:1;}

/* User pill */
.user-pill{
    display:flex;
    align-items:center;
    gap:10px;
    background:var(--bg-card-muted);
    padding:6px 10px;
    border-radius:999px;
    border:1px solid var(--border-soft);
}
.avatar-circle{
    width:28px;
    height:28px;
    border-radius:999px;
    background:var(--avatar-bg);
    color:white;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:14px;
    font-weight:600;
}
.user-name{font-size:13px;font-weight:600}
.user-email{font-size:11px;color:var(--text-sub)}

/* KPI cards */
.kpi-grid{
    display:grid;
    grid-template-columns:repeat(4,minmax(0,1fr));
    gap:14px;
    margin-bottom:18px;
}
.kpi-card{
    background:var(--bg-card);
    border-radius:18px;
    padding:14px 16px;
    box-shadow:var(--shadow-soft);
    border:1px solid var(--border-soft);
}
.kpi-card p{
    font-size:13px;
    color:var(--text-sub);
    margin-bottom:4px;
}
.kpi-card h2{
    font-size:22px;
    margin-bottom:2px;
}
.kpi-sub{
    font-size:11px;
    color:var(--text-muted);
}

/* Content grid */
.content-grid{
    display:grid;
    grid-template-columns:2fr 1.3fr;
    grid-auto-rows:minmax(0,1fr);
    gap:14px;
}
.card{
    background:var(--bg-card);
    border-radius:18px;
    padding:16px 16px 12px;
    box-shadow:var(--shadow-soft);
    border:1px solid var(--border-soft);
}
.card.large{grid-column:span 2}
.card-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}
.card-header h3{
    font-size:15px;
    color:var(--text-main);
}

/* Table */
.table{
    width:100%;
    border-collapse:collapse;
    font-size:13px;
}
.table th,.table td{
    padding:6px 8px;
    text-align:left;
}
.table thead{
    color:var(--text-sub);
    font-size:12px;
}
.table tbody tr:nth-child(even){
    background:var(--bg-card-muted);
}

/* Badges */
.badge{
    padding:3px 8px;
    border-radius:999px;
    font-size:11px;
}
.badge-success{
    background:var(--badge-success-bg);
    color:var(--badge-success-text);
}
.badge-danger{
    background:var(--badge-danger-bg);
    color:var(--badge-danger-text);
}
.badge-muted{
    background:var(--badge-muted-bg);
    color:var(--badge-muted-text);
}

/* Pequeno ajuste charts em dark */
html[data-theme="dark"] canvas{
    background:transparent;
}

.user-pill-link{
    text-decoration:none;
    color:inherit;
}
.user-pill-link:hover{
    filter:brightness(0.97);
}